<?xml version="1.0" encoding="ISO-8859-1"?>
<scenario name="">


    <recv request="INVITE" rrs="true" crlf="true">
        <action>
            <ereg regexp=".*" search_in="hdr" header="Via:" occurrence="1" check_it="true" assign_to="via_1" />
            <ereg regexp=".*" search_in="hdr" header="Via:" occurrence="2" check_it="true" assign_to="via_2" />
            <log message="Regex action log: hdr=Via (1), var=via_1, value=[$via_1]" />
            <log message="Regex action log: hdr=Via (2), var=via_2, value=[$via_2]" />
        </action>
    </recv>

    <pause distribution="uniform" min="100" max="300" />

    <send>
        <![CDATA[
SIP/2.0 100 Trying
[last_Via:]
[last_From:]
[last_To:]
[last_Call-ID:]
[last_CSeq:]
Contact: [field0] <sip:[field0]@[local_ip]:[local_port]>
[last_Record-Route:]
Content-Length: [len]
]]>
    </send>

    <pause distribution="uniform" min="100" max="300" />

    <send>
        <![CDATA[
SIP/2.0 180 Ringing
[last_Via:]
[last_From:]
[last_To:];tag=CALLEE_totag
[last_Call-ID:]
[last_CSeq:]
Contact: [field0] <sip:[field0]@[local_ip]:[local_port]>
[last_Record-Route:]
Content-Length: [len]
]]>
    </send>


    <recv request="CANCEL" timeout="9000" />


    <send>
        <![CDATA[
SIP/2.0 200 OK
[last_Via:]
[last_From:]
[last_To:];tag=CALLEE[call_number]
[last_Call-ID:]
[last_CSeq:]
Contact: [field0] <sip:[field0]@[local_ip]:[local_port]>
Content-Length: [len]
]]>
    </send>

    <pause distribution="uniform" min="100" max="300" />

    <send>
        <![CDATA[
SIP/2.0 487 Request Terminated
Via:[$via_1],[$via_2]
[last_From:]
[last_To:];tag=CALLEE[call_number]
[last_Call-ID:]
CSeq: 1 INVITE
Contact: [field0] <sip:[field0]@[local_ip]:[local_port]>
[last_Record-Route:]
Content-Length: [len]
]]>
    </send>

    <recv request="ACK" rrs="true" />


    <!-- definition of the response time repartition table (unit is ms)   -->
    <ResponseTimeRepartition value="10, 20, 30, 40, 50" /> 

    <!-- definition of the call length repartition table (unit is ms)     -->
    <CallLengthRepartition value="10, 50, 100, 500, 1000, 5000, 10000" />

</scenario>